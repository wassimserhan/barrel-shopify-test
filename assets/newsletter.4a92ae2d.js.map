{"version":3,"file":"newsletter.4a92ae2d.js","sources":["../modules/newsletter/newsletter.js"],"sourcesContent":["import conform from 'conform.js'\n\nexport default (el) => {\n  const form = el.getElementsByTagName('form')[0]\n  const success = document.getElementById('newsletterSuccess')\n\n  const newsletter = conform(form, {\n    tests: [\n      {\n        name: /EMAIL|contact\\[email\\]/,\n        validate: ({ value }) => /.+@.+\\..+/.test(value), // basic email check\n        success: ({node}) => node.classList.remove('has-error'),\n        error: ({node}) => node.classList.add('has-error')\n      }\n    ]\n  })\n\n  /**\n   * Convert action to work with JSONp\n   * Mailchimp API\n   *\n   * Enable JSONp flag on Conform instance\n   */\n  if (/post\\?u=/.test(newsletter.action)) {\n    newsletter.jsonp = 'c'\n    newsletter.action = newsletter.action.replace(/post\\?u=/, 'post-json?u=')\n  }\n\n  newsletter.on('submit', () => {\n    //\n  })\n\n  newsletter.on('error', () => {\n    //\n  })\n\n  /**\n   * If a message is returned (Mailchimp only)\n   * show the message. Otherwise, show\n   * default message hard-coded in\n   * the markup.\n   */\n  newsletter.on('success', data => {\n    let msg = data.res.msg\n    form.style.display = 'none'\n    if (msg) { success.innerHTML = msg }\n    success.style.display = 'block'\n  })\n}\n"],"names":["newsletter","el","form","success","conform","value","node","data","msg"],"mappings":"uIAEA,MAAeA,EAACC,GAAO,CACrB,MAAMC,EAAOD,EAAG,qBAAqB,MAAM,EAAE,CAAC,EACxCE,EAAU,SAAS,eAAe,mBAAmB,EAErDH,EAAaI,EAAQF,EAAM,CAC/B,MAAO,CACL,CACE,KAAM,yBACN,SAAU,CAAC,CAAE,MAAAG,CAAK,IAAO,YAAY,KAAKA,CAAK,EAC/C,QAAS,CAAC,CAAC,KAAAC,CAAI,IAAMA,EAAK,UAAU,OAAO,WAAW,EACtD,MAAO,CAAC,CAAC,KAAAA,CAAI,IAAMA,EAAK,UAAU,IAAI,WAAW,CAClD,CACF,CACL,CAAG,EAQG,WAAW,KAAKN,EAAW,MAAM,IACnCA,EAAW,MAAQ,IACnBA,EAAW,OAASA,EAAW,OAAO,QAAQ,WAAY,cAAc,GAG1EA,EAAW,GAAG,SAAU,IAAM,CAEhC,CAAG,EAEDA,EAAW,GAAG,QAAS,IAAM,CAE/B,CAAG,EAQDA,EAAW,GAAG,UAAWO,GAAQ,CAC/B,IAAIC,EAAMD,EAAK,IAAI,IACnBL,EAAK,MAAM,QAAU,OACjBM,IAAOL,EAAQ,UAAYK,GAC/BL,EAAQ,MAAM,QAAU,OAC5B,CAAG,CACH"}