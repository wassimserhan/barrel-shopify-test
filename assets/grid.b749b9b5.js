import{C as h,h as o}from"./preact.4b3dbaf5.js";import{c as d}from"./preact-redux.esm.03ebc624.js";import u from"./product-cell.fbe31dec.js";import"./index.08ff3111.js";import"./index.8731960a.js";import{showAll as f}from"./actions.239c985f.js";import"./index.3d5aa0a7.js";import"./util.0ea43082.js";import"./_commonjsHelpers.de833af9.js";import"./connectors.1a4f22f2.js";import"./index.4dec3c6a.js";var a,n;const g=({variants:p,selected:t,sort:r,view:e,price:i,compactView:s})=>({variants:p,selected:t,sort:r,view:e,price:i,compactView:s}),v=p=>({showAll:()=>{p(f())}});let G=(a=d(g,v),a(n=class extends h{constructor(t){super(t),this.compactLimit=12}filterVariants({options:t,price:r}){let e=this.filterViaFacet(t),i=this.filterViaPrice(r);return e&&i}filterViaFacet(t){let{selected:r=[]}=this.props,e=r.reduce((i,s)=>{let l=s.split("|");return i[l[0]]||(i[l[0]]=[]),i[l[0]].push(l[1]),i},{});return r.length?Object.keys(e).every(i=>t[i]&&!!~e[i].indexOf(t[i])):!0}filterViaPrice(t){let{price:r}=this.props;return t<=r.max&&t>=r.min}sort(t,r){let{sort:e}=this.props;if(e==="price-ascending")return t.price-r.price;if(e==="price-descending")return r.price-t.price}render(){let{variants:t=[],view:r,compactView:e,showAll:i}=this.props,s=t.filter(c=>this.filterVariants(c)).sort((c,m)=>this.sort(c,m)),l=s.length>this.compactLimit&&e;return o("div",{class:"align-c"},o("div",{class:`plp__grid view--${r} grid`},s.length?s.slice(0,l?this.compactLimit:s.length).map(c=>o(u,c)):o("div",null,"No Products To Display")),l&&o("a",{class:"btn is-blush plp__load-more",onClick:i},o("span",{class:"btn__el"},"Show All")))}})||n);export{G as default};
